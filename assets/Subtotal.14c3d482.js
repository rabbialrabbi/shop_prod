import{bd as h,a$ as c,b0 as p,bf as y,H as _,J as T,K as n,B as r,L as b,X as m,P as s,S as d,aW as a,R as V,bg as f,bh as v}from"./index.c7964aad.js";const x=h("sellsOrders",{state:()=>({activeTab:"tab1",selectedTab:0,selectedItems:0,totalTab:1,orders:[{title:"customer1",icon:"mdi-account-outline",tab:"tab1",customer_id:"5947456742",items:[{product_id:null,quantity:null,unit_price:null,total_price:null}],subtotal:0,labour:0,discount:0,collection:0,total:0,pay:0,balance:0}],status:0}),getters:{order:t=>t.orders[t.selectedTab],item:t=>t.orders[t.selectedTab].items[t.selectedItems]},actions:{setUnitType(t){this.unitType=this.createSelectData(t,"name","unit_id")},setCategoryList(t){this.categories=this.createSelectData(t,"name","category_id")},setProductTypeList(t){this.productTypes=t},async updateProductList(t){let e=await c.get(p.getProductList);this.productList=e.data.data},createSelectData(t,e,u){return t.map(l=>({title:l[e],value:l[u]}))},addProductItem(){this.selectedItems++,this.orders[this.selectedTab].items.push({product_id:null,quantity:0,unit_price:0,total_price:0})},addTab(){this.totalTab++;let t=this.totalTab;this.orders.push({title:`customer${t}`,icon:"mdi-account-outline",tab:`tab${t}`,items:[{product_id:null,quantity:null,unit_price:null,total_price:null}],subtotal:0,labour:0,discount:0,collection:0,total:0,pay:0,balance:0})},selectTab(t){this.selectedTab=t,this.activeTab=this.orders[t].tab},updateProductData(){let t=0;this.order.items.forEach(e=>{t=t+e.total_price}),this.order.subtotal=t,this.order.total=t-this.order.discount,this.order.balance=this.order.total-this.order.pay,this.order.total=this.order.subtotal+this.order.labour+this.order.collection-this.order.discount,this.order.pay=this.order.total,this.order.balance=this.order.total-this.order.pay},updateBalance(){this.order.balance=this.order.total-this.order.pay},async payment(){let t=this;await c.post(p.salesOrderStore,this.order).then(function(e){e.status&&t.resetOrder()}).catch(function(e){})},resetOrder(){this.orders[this.selectedTab].items=[];let t=this;setTimeout(()=>{t.addProductItem()},100),this.orders[this.selectedTab].subtotal=0,this.orders[this.selectedTab].discount=0,this.orders[this.selectedTab].total=0,this.orders[this.selectedTab].pay=0,this.orders[this.selectedTab].balance=0,this.orders[this.selectedTab].labour=0,this.orders[this.selectedTab].collection=0}}});const i=t=>(f("data-v-2a296ad3"),t=t(),v(),t),S={class:"text-center"},P={class:"text-center"},g={class:"text-center"},D={class:"text-center"},I=i(()=>s("td",null,"Total",-1)),L={class:"text-center"},U=i(()=>s("td",null,"Pay",-1)),B={class:"text-center"},$=i(()=>s("td",null,"Balance",-1)),O={class:"text-center"},K={__name:"Subtotal",setup(t){const e=x();return(u,l)=>(_(),T(V,{class:"pa-x ma-x"},{default:n(()=>[r(b,{md:"6",lg:"8",cols:"12",class:"pa-x ma-x"},{default:n(()=>[r(m,null,{default:n(()=>[s("tbody",null,[s("tr",null,[s("td",S,[r(d,{modelValue:a(e).order.subtotal,"onUpdate:modelValue":l[0]||(l[0]=o=>a(e).order.subtotal=o),type:"number",variant:"underlined",class:"centered-input",label:"Subtotal",readonly:""},null,8,["modelValue"])]),s("td",P,[r(d,{modelValue:a(e).order.labour,"onUpdate:modelValue":l[1]||(l[1]=o=>a(e).order.labour=o),onKeyup:l[2]||(l[2]=o=>a(e).updateProductData()),type:"number",variant:"underlined",class:"centered-input",label:"Labour"},null,8,["modelValue"])]),s("td",g,[r(d,{modelValue:a(e).order.discount,"onUpdate:modelValue":l[3]||(l[3]=o=>a(e).order.discount=o),onKeyup:l[4]||(l[4]=o=>a(e).updateProductData()),type:"number",class:"centered-input",variant:"underlined",label:"Discount"},null,8,["modelValue"])]),s("td",D,[r(d,{modelValue:a(e).order.collection,"onUpdate:modelValue":l[5]||(l[5]=o=>a(e).order.collection=o),onKeyup:l[6]||(l[6]=o=>a(e).updateProductData()),type:"number",class:"centered-input",variant:"underlined",label:"Collection"},null,8,["modelValue"])])])])]),_:1})]),_:1}),r(b,{md:"6",lg:"4",cols:"12"},{default:n(()=>[r(m,null,{default:n(()=>[s("tbody",null,[s("tr",null,[I,s("td",L,[r(d,{modelValue:a(e).order.total,"onUpdate:modelValue":l[7]||(l[7]=o=>a(e).order.total=o),type:"number",placeholder:"Discount",variant:"solo-filled",class:"centered-input",readonly:""},null,8,["modelValue"])])]),s("tr",null,[U,s("td",B,[r(d,{modelValue:a(e).order.pay,"onUpdate:modelValue":l[8]||(l[8]=o=>a(e).order.pay=o),onKeyup:l[9]||(l[9]=o=>a(e).updateBalance()),type:"number",placeholder:"Pay",variant:"solo-filled",class:"centered-input"},null,8,["modelValue"])])]),s("tr",null,[$,s("td",O,[r(d,{modelValue:a(e).order.balance,"onUpdate:modelValue":l[10]||(l[10]=o=>a(e).order.balance=o),type:"number",placeholder:"Discount",variant:"solo-filled",class:"centered-input",readonly:""},null,8,["modelValue"])])])])]),_:1})]),_:1})]),_:1}))}},C=y(K,[["__scopeId","data-v-2a296ad3"]]);export{C as S,x as u};
