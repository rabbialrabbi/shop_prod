import{bc as v,b7 as y,b8 as T,be as x,G as p,a8 as b,H as S,J as P,K as c,B as o,L as V,X as f,P as l,S as d,b6 as u,R as D,bf as I,bg as g}from"./index.889909e8.js";const L=v("sellsOrders",{state:()=>({activeTab:"tab1",selectedTab:0,selectedItems:0,totalTab:1,orders:[{title:"customer1",icon:"mdi-account-outline",tab:"tab1",items:[{product_id:null,quantity:null,unit_price:null,total_price:null}],subtotal:0,labour:0,discount:0,collection:0,total:0,pay:0,balance:0}],status:0}),getters:{order:t=>t.orders[t.selectedTab],item:t=>t.orders[t.selectedTab].items[t.selectedItems]},actions:{setUnitType(t){this.unitType=this.createSelectData(t,"name","unit_id")},setCategoryList(t){this.categories=this.createSelectData(t,"name","category_id")},setProductTypeList(t){this.productTypes=t},async updateProductList(t){let e=await y.get(T.getProductList);this.productList=e.data.data},createSelectData(t,e,n){return t.map(i=>({title:i[e],value:i[n]}))},addProductItem(){this.selectedItems++,this.orders[this.selectedTab].items.push({product_id:null,quantity:0,unit_price:0,total_price:0})},addTab(){this.totalTab++;let t=this.totalTab;this.orders.push({title:`customer${t}`,icon:"mdi-account-outline",tab:`tab${t}`,items:[{product_id:null,quantity:null,unit_price:null,total_price:null}],subtotal:0,discount:0,total:0,pay:0,balance:0})},selectTab(t){this.selectedTab=t,this.activeTab=this.orders[t].tab},updateProductData(){this.item.total_price=parseInt(this.item.unit_price)*parseInt(this.item.quantity||1);let t=0;this.order.items.forEach(e=>{t=t+e.total_price}),this.order.subtotal=t,this.order.total=t-this.order.discount,this.order.balance=this.order.total-this.order.pay,this.order.total=this.order.subtotal+this.order.labour+this.order.collection-this.order.discount,this.order.balance=this.order.total-this.order.pay},async payment(){let t=this;await y.post(T.salesOrderStore,this.order).then(function(e){e.status&&t.resetOrder()}).catch(function(e){})},resetOrder(){this.orders[this.selectedTab].items=[];let t=this;setTimeout(()=>{t.addProductItem()},100),this.orders[this.selectedTab].subtotal=0,this.orders[this.selectedTab].discount=0,this.orders[this.selectedTab].total=0,this.orders[this.selectedTab].pay=0,this.orders[this.selectedTab].balance=0,this.orders[this.selectedTab].labour=0,this.orders[this.selectedTab].collection=0}}});const _=t=>(I("data-v-8dccb3c2"),t=t(),g(),t),U={class:"text-center"},O={class:"text-center"},w={class:"text-center"},B={class:"text-center"},q=_(()=>l("td",null,"Total",-1)),C={class:"text-center"},N=_(()=>l("td",null,"Pay",-1)),k={class:"text-center"},R=_(()=>l("td",null,"Balance",-1)),$={class:"text-center"},E={__name:"Subtotal",setup(t){const e=L(),n=p(e.order.labour),i=p(e.order.discount),h=p(e.order.collection),m=p(e.order.pay);return b(n,r=>{e.order.subtotal>0&&(e.order.labour=r,e.updateProductData())}),b(i,r=>{e.order.subtotal>0&&(e.order.discount=r,e.updateProductData())}),b(h,r=>{e.order.subtotal>0&&(e.order.collection=r,e.updateProductData())}),b(m,r=>{e.order.subtotal>0&&(e.order.pay=r,e.updateProductData())}),(r,a)=>(S(),P(D,{class:"pa-x ma-x"},{default:c(()=>[o(V,{md:"6",lg:"8",cols:"12",class:"pa-x ma-x"},{default:c(()=>[o(f,null,{default:c(()=>[l("tbody",null,[l("tr",null,[l("td",U,[o(d,{modelValue:u(e).order.subtotal,"onUpdate:modelValue":a[0]||(a[0]=s=>u(e).order.subtotal=s),type:"number",variant:"underlined",class:"centered-input",label:"Subtotal",readonly:""},null,8,["modelValue"])]),l("td",O,[o(d,{modelValue:n.value,"onUpdate:modelValue":a[1]||(a[1]=s=>n.value=s),type:"number",variant:"underlined",class:"centered-input",label:"Labour"},null,8,["modelValue"])]),l("td",w,[o(d,{modelValue:i.value,"onUpdate:modelValue":a[2]||(a[2]=s=>i.value=s),type:"number",class:"centered-input",variant:"underlined",label:"Discount"},null,8,["modelValue"])]),l("td",B,[o(d,{modelValue:h.value,"onUpdate:modelValue":a[3]||(a[3]=s=>h.value=s),type:"number",class:"centered-input",variant:"underlined",label:"Collection"},null,8,["modelValue"])])])])]),_:1})]),_:1}),o(V,{md:"6",lg:"4",cols:"12"},{default:c(()=>[o(f,null,{default:c(()=>[l("tbody",null,[l("tr",null,[q,l("td",C,[o(d,{modelValue:u(e).order.total,"onUpdate:modelValue":a[4]||(a[4]=s=>u(e).order.total=s),type:"number",placeholder:"Discount",variant:"solo-filled",class:"centered-input",readonly:""},null,8,["modelValue"])])]),l("tr",null,[N,l("td",k,[o(d,{modelValue:m.value,"onUpdate:modelValue":a[5]||(a[5]=s=>m.value=s),type:"number",placeholder:"Pay",variant:"solo-filled",class:"centered-input"},null,8,["modelValue"])])]),l("tr",null,[R,l("td",$,[o(d,{modelValue:u(e).order.balance,"onUpdate:modelValue":a[6]||(a[6]=s=>u(e).order.balance=s),type:"number",placeholder:"Discount",variant:"solo-filled",class:"centered-input",readonly:""},null,8,["modelValue"])])])])]),_:1})]),_:1})]),_:1}))}},G=x(E,[["__scopeId","data-v-8dccb3c2"]]);export{G as S,L as u};
