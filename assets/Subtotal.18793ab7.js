import{bc as m,b7 as p,b8 as h,be as y,G as b,a8 as _,H as T,J as f,K as V,P as s,B as i,S as n,b6 as r,X as v,bf as S,bg as x}from"./index.8ca49e5c.js";const D=m("sellsOrders",{state:()=>({activeTab:"tab1",selectedTab:0,selectedItems:0,totalTab:1,orders:[{title:"customer1",icon:"mdi-account-outline",tab:"tab1",items:[{product_id:null,quantity:null,unit_price:null,total_price:null}],subtotal:0,discount:0,total:0,pay:0,balance:0}],status:0}),getters:{order:t=>t.orders[t.selectedTab],item:t=>t.orders[t.selectedTab].items[t.selectedItems]},actions:{setUnitType(t){this.unitType=this.createSelectData(t,"name","unit_id")},setCategoryList(t){this.categories=this.createSelectData(t,"name","category_id")},setProductTypeList(t){this.productTypes=t},async updateProductList(t){let e=await p.get(h.getProductList);this.productList=e.data.data},createSelectData(t,e,d){return t.map(o=>({title:o[e],value:o[d]}))},addProductItem(){this.selectedItems++,this.orders[this.selectedTab].items.push({product_id:null,quantity:0,unit_price:0,total_price:0})},addTab(){this.totalTab++;let t=this.totalTab;this.orders.push({title:`customer${t}`,icon:"mdi-account-outline",tab:`tab${t}`,items:[{product_id:null,quantity:null,unit_price:null,total_price:null}],subtotal:0,discount:0,total:0,pay:0,balance:0})},selectTab(t){this.selectedTab=t,this.activeTab=this.orders[t].tab},updateProductData(){this.item.total_price=parseInt(this.item.unit_price)*parseInt(this.item.quantity||1);let t=0;this.order.items.forEach(e=>{t=t+e.total_price}),this.order.subtotal=t,this.order.total=t-this.order.discount,this.order.balance=this.order.total-this.order.pay,this.order.total=this.order.subtotal-this.order.discount,this.order.balance=this.order.total-this.order.pay},async payment(){let t=this;await p.post(h.salesOrderStore,this.order).then(function(e){e.status&&t.resetOrder()}).catch(function(e){})},resetOrder(){this.orders[this.selectedTab].items=[];let t=this;setTimeout(()=>{t.addProductItem()},100),this.orders[this.selectedTab].subtotal=0,this.orders[this.selectedTab].discount=0,this.orders[this.selectedTab].total=0,this.orders[this.selectedTab].pay=0,this.orders[this.selectedTab].balance=0}}});const u=t=>(S("data-v-b893de00"),t=t(),x(),t),I=u(()=>s("td",null,"SubTotal",-1)),P={class:"text-center"},g=u(()=>s("td",null,"Discount",-1)),w={class:"text-center"},L=u(()=>s("td",null,"Total",-1)),O={class:"text-center"},U=u(()=>s("td",null,"Pay",-1)),B={class:"text-center"},q=u(()=>s("td",null,"Balance",-1)),N={class:"text-center"},k={__name:"Subtotal",setup(t){const e=D(),d=b(e.order.discount),o=b(e.order.pay);return _(d,c=>{e.order.subtotal>0&&(e.order.discount=c,e.updateProductData())}),_(o,c=>{e.order.subtotal>0&&(e.order.pay=c,e.updateProductData())}),(c,a)=>(T(),f(v,null,{default:V(()=>[s("tbody",null,[s("tr",null,[I,s("td",P,[i(n,{modelValue:r(e).order.subtotal,"onUpdate:modelValue":a[0]||(a[0]=l=>r(e).order.subtotal=l),type:"number",placeholder:"Discount",variant:"plain",class:"centered-input",readonly:""},null,8,["modelValue"])])]),s("tr",null,[g,s("td",w,[i(n,{modelValue:d.value,"onUpdate:modelValue":a[1]||(a[1]=l=>d.value=l),type:"number",placeholder:"Discount",variant:"plain",class:"centered-input"},null,8,["modelValue"])])]),s("tr",null,[L,s("td",O,[i(n,{modelValue:r(e).order.total,"onUpdate:modelValue":a[2]||(a[2]=l=>r(e).order.total=l),type:"number",placeholder:"Discount",variant:"solo-filled",class:"centered-input input-shadow input-warning",readonly:""},null,8,["modelValue"])])]),s("tr",null,[U,s("td",B,[i(n,{modelValue:o.value,"onUpdate:modelValue":a[3]||(a[3]=l=>o.value=l),type:"number",placeholder:"Pay",variant:"solo-filled",class:"centered-input input-shadow input-success"},null,8,["modelValue"])])]),s("tr",null,[q,s("td",N,[i(n,{modelValue:r(e).order.balance,"onUpdate:modelValue":a[4]||(a[4]=l=>r(e).order.balance=l),type:"number",placeholder:"Discount",variant:"solo-filled",class:"centered-input input-shadow input-danger",readonly:""},null,8,["modelValue"])])])])]),_:1}))}},$=y(k,[["__scopeId","data-v-b893de00"]]);export{$ as S,D as u};
