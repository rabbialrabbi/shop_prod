import{bd as z,a$ as S,b0 as U,aT as E,G as h,a8 as P,H as _,J as g,K as t,B as e,L as i,aW as d,S as p,R as V,Y as x,Z as O,_ as $,be as y,bg as q,X as w,P as c,bh as F,bi as H,aV as W,M as R,bc as I,T as v,N as C,Q as K,F as D,E as k,$ as G}from"./index.0e455d1f.js";import{h as J}from"./moment.9709ab41.js";import{V as Y}from"./VAutocomplete.1abd41b8.js";import{b as L}from"./route-block.011d1056.js";import{V as B,a as X,b as Z,c as j}from"./VWindowItem.6789568a.js";import"./VSelect.842816c2.js";import"./VCheckboxBtn.b6380877.js";const T=z("buyOrders",{state:()=>({activeTab:"tab1",selectedTab:0,selectedItems:0,totalTab:1,orders:[{title:"buyer1",icon:"mdi-account-outline",tab:"tab1",vendor_id:null,order_date:J().format("YYYY-MM-DD"),items:[{product_id:null,quantity:null,unit_price:null,total_price:null}],subtotal:0,charge:0,discount:0,collection:0,total:0,pay:0,balance:0}],status:0}),getters:{order:a=>a.orders[a.selectedTab],item:a=>a.orders[a.selectedTab].items[a.selectedItems]},actions:{setUnitType(a){this.unitType=this.createSelectData(a,"name","unit_id")},setCategoryList(a){this.categories=this.createSelectData(a,"name","category_id")},setProductTypeList(a){this.productTypes=a},async updateProductList(a){let l=await S.get(U.getProductList);this.productList=l.data.data},createSelectData(a,l,m){return a.map(o=>({title:o[l],value:o[m]}))},addProductItem(){this.selectedItems++,this.orders[this.selectedTab].items.push({product_id:null,quantity:0,unit_price:0,total_price:0})},addTab(){this.totalTab++;let a=this.totalTab;this.orders.push({title:`buyer${a}`,icon:"mdi-account-outline",tab:`tab${a}`,items:[{product_id:null,quantity:null,unit_price:null,total_price:null}],subtotal:0,charge:0,discount:0,collection:0,total:0,pay:0,balance:0})},selectTab(a){this.selectedTab=a,this.activeTab=this.orders[a].tab},updateProductData(){this.item.total_price=parseInt(this.item.unit_price)*parseInt(this.item.quantity||1);let a=0;this.order.items.forEach(l=>{a=a+l.total_price}),console.log("Hello"),this.order.subtotal=a,this.order.total=a+this.order.discount,this.order.balance=this.order.total-this.order.pay,this.order.total=this.order.subtotal+this.order.charge+this.order.collection-this.order.discount,this.order.balance=this.order.total-this.order.pay},async payment(){let a=this;await S.post(U.buyOrderStore,this.order).then(function(l){l.status&&a.resetOrder()}).catch(function(l){})},resetOrder(){this.orders[this.selectedTab].items=[];let a=this;setTimeout(()=>{a.addProductItem()},100),this.orders[this.selectedTab].subtotal=0,this.orders[this.selectedTab].discount=0,this.orders[this.selectedTab].total=0,this.orders[this.selectedTab].pay=0,this.orders[this.selectedTab].balance=0}}}),Q={__name:"ItemInput",setup(a){const l=T(),m=E(),o=h(""),r=h(""),u=h(""),s=h("");return P(o,(n,f)=>{if(n){let b=m.productList.find(M=>M.product_id===n);l.item.product_id=o,l.item.unit_price=b.selling_price,r.value=1,u.value=b.selling_price,s.value=b.selling_price,l.updateProductData()}}),P(r,n=>{n&&(l.item.quantity=n,l.updateProductData(),s.value=l.item.total_price)}),P(u,n=>{n&&(l.item.unit_price=n,l.updateProductData(),s.value=l.item.total_price)}),(n,f)=>(_(),g(V,null,{default:t(()=>[e(i,{cols:"12",lg:"3"},{default:t(()=>[e(Y,{modelValue:o.value,"onUpdate:modelValue":f[0]||(f[0]=b=>o.value=b),items:d(m).getProductsSelect,label:"Product",variant:"underlined"},null,8,["modelValue","items"])]),_:1}),e(i,{cols:"12",lg:"3"},{default:t(()=>[e(p,{modelValue:r.value,"onUpdate:modelValue":f[1]||(f[1]=b=>r.value=b),label:"Unit Amount",placeholder:"Unit Amount",variant:"underlined"},null,8,["modelValue"])]),_:1}),e(i,{cols:"12",lg:"3"},{default:t(()=>[e(p,{modelValue:u.value,"onUpdate:modelValue":f[2]||(f[2]=b=>u.value=b),label:"Price",variant:"underlined"},null,8,["modelValue"])]),_:1}),e(i,{cols:"12",lg:"3"},{default:t(()=>[e(p,{modelValue:s.value,"onUpdate:modelValue":f[3]||(f[3]=b=>s.value=b),label:"Subtotal",variant:"underlined",readonly:""},null,8,["modelValue"])]),_:1})]),_:1}))}},ee={__name:"OrderItem",props:["tab"],setup(a){const m=a.tab,o=T();return(r,u)=>(_(),g(y,null,{default:t(()=>[(_(!0),x(O,null,$(d(o).orders[d(m)].items,(s,n)=>(_(),g(Q,{key:n,item:n,tab:d(m),onClick:f=>d(o).selectedItems=n},null,8,["item","tab","onClick"]))),128))]),_:1}))}};const N=a=>(F("data-v-cc1a7bb0"),a=a(),H(),a),te={class:"text-center"},le={class:"text-center"},ae={class:"text-center"},oe={class:"text-center"},de=N(()=>c("td",null,"Total",-1)),re={class:"text-center"},se=N(()=>c("td",null,"Pay",-1)),ue={class:"text-center"},ne=N(()=>c("td",null,"Balance",-1)),ie={class:"text-center"},ce={__name:"Subtotal",setup(a){const l=T();return(m,o)=>(_(),g(V,{class:"pa-x ma-x"},{default:t(()=>[e(i,{md:"6",lg:"8",cols:"12",class:"pa-x ma-x"},{default:t(()=>[e(w,null,{default:t(()=>[c("tbody",null,[c("tr",null,[c("td",te,[e(p,{modelValue:d(l).order.subtotal,"onUpdate:modelValue":o[0]||(o[0]=r=>d(l).order.subtotal=r),type:"number",variant:"underlined",class:"centered-input",label:"Subtotal",readonly:""},null,8,["modelValue"])]),c("td",le,[e(p,{modelValue:d(l).order.charge,"onUpdate:modelValue":o[1]||(o[1]=r=>d(l).order.charge=r),onKeyup:o[2]||(o[2]=r=>d(l).updateProductData()),type:"number",variant:"underlined",class:"centered-input",label:"Charge"},null,8,["modelValue"])]),c("td",ae,[e(p,{modelValue:d(l).order.discount,"onUpdate:modelValue":o[3]||(o[3]=r=>d(l).order.discount=r),onKeyup:o[4]||(o[4]=r=>d(l).updateProductData()),type:"number",class:"centered-input",variant:"underlined",label:"Discount"},null,8,["modelValue"])]),c("td",oe,[e(p,{modelValue:d(l).order.collection,"onUpdate:modelValue":o[5]||(o[5]=r=>d(l).order.collection=r),onKeyup:o[6]||(o[6]=r=>d(l).updateProductData()),type:"number",class:"centered-input",variant:"underlined",label:"Collection"},null,8,["modelValue"])])])])]),_:1})]),_:1}),e(i,{md:"6",lg:"4",cols:"12"},{default:t(()=>[e(w,null,{default:t(()=>[c("tbody",null,[c("tr",null,[de,c("td",re,[e(p,{modelValue:d(l).order.total,"onUpdate:modelValue":o[7]||(o[7]=r=>d(l).order.total=r),type:"number",placeholder:"Discount",variant:"solo-filled",class:"centered-input",readonly:""},null,8,["modelValue"])])]),c("tr",null,[se,c("td",ue,[e(p,{modelValue:d(l).order.pay,"onUpdate:modelValue":o[8]||(o[8]=r=>d(l).order.pay=r),onKeyup:o[9]||(o[9]=r=>d(l).updateProductData()),type:"number",placeholder:"Pay",variant:"solo-filled",class:"centered-input"},null,8,["modelValue"])])]),c("tr",null,[ne,c("td",ie,[e(p,{modelValue:d(l).order.balance,"onUpdate:modelValue":o[10]||(o[10]=r=>d(l).order.balance=r),type:"number",placeholder:"Discount",variant:"solo-filled",class:"centered-input",readonly:""},null,8,["modelValue"])])])])]),_:1})]),_:1})]),_:1}))}},me=q(ce,[["__scopeId","data-v-cc1a7bb0"]]),pe={__name:"CreateOrder",props:["index"],setup(a){const m=a.index,o=T(),r=h([]);return W(async()=>{let u=await S.get(U.getVendor);r.value=u.data.data.map(s=>({title:s.name,value:s.vendor_id}))}),(u,s)=>(_(),g(V,null,{default:t(()=>[e(i,{md:"6",lg:"12",cols:"12"},{default:t(()=>[e(R,null,{default:t(()=>[e(V,{"no-gutters":""},{default:t(()=>[e(i,{cols:"12",sm:"8",md:"12",lg:"6",order:"2","order-lg":"1"},{default:t(()=>[e(y,null,{default:t(()=>[e(I,null,{default:t(()=>[v("Buyer")]),_:1})]),_:1}),e(C,null,{default:t(()=>[e(V,null,{default:t(()=>[e(i,{cols:"12",md:"6"},{default:t(()=>[e(Y,{modelValue:d(o).order.vendor_id,"onUpdate:modelValue":s[0]||(s[0]=n=>d(o).order.vendor_id=n),items:r.value,label:"Customer Name",placeholder:"Customer Name"},null,8,["modelValue","items"])]),_:1}),e(i,{cols:"12",md:"6"},{default:t(()=>[e(p,{modelValue:u.firstName,"onUpdate:modelValue":s[1]||(s[1]=n=>u.firstName=n),label:"Contact No",placeholder:"Contact No"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(i,{cols:"12",sm:"4",md:"12",lg:"6",order:"1","order-lg":"2"},{default:t(()=>[e(y,null,{default:t(()=>[e(I,null,{default:t(()=>[v("Order")]),_:1})]),_:1}),e(C,null,{default:t(()=>[e(V,null,{default:t(()=>[e(i,{cols:"12",md:"6"},{default:t(()=>[e(p,{modelValue:u.firstName,"onUpdate:modelValue":s[2]||(s[2]=n=>u.firstName=n),label:"Order No",placeholder:"Order No",readonly:""},null,8,["modelValue"])]),_:1}),e(i,{cols:"12",md:"6"},{default:t(()=>[e(p,{modelValue:d(o).order.order_date,"onUpdate:modelValue":s[3]||(s[3]=n=>d(o).order.order_date=n),label:"Order Date",placeholder:"Order Date",type:"date"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(y,null,{default:t(()=>[e(I,null,{default:t(()=>[v("Items")]),_:1})]),_:1}),e(C,null,{default:t(()=>[e(K)]),_:1}),e(ee,{tab:d(m)},null,8,["tab"]),e(y,null,{default:t(()=>[e(D,{block:"",onClick:s[4]||(s[4]=n=>d(o).addProductItem()),class:"bg-warning"},{default:t(()=>[e(k,{size:"2rem",icon:"material-symbols:add-circle-outline-rounded"})]),_:1})]),_:1}),e(y,null,{default:t(()=>[e(me)]),_:1}),e(y,null,{default:t(()=>[e(V,{class:"pa-x ma-x"},{default:t(()=>[e(i,{md:"6",lg:"8",cols:"12",class:"pa-x ma-x"}),e(i,{md:"6",lg:"4",cols:"12"},{default:t(()=>[e(V,null,{default:t(()=>[e(i,{md:"6",lg:"6",cols:"12",class:"text-center"},{default:t(()=>[e(D,{class:"bg-warning"},{default:t(()=>[v(" Save ")]),_:1})]),_:1}),e(i,{md:"6",lg:"6",cols:"12",class:"text-center"},{default:t(()=>[e(D,{class:"bg-success",onClick:s[5]||(s[5]=n=>d(o).payment())},{default:t(()=>[v(" Payment ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}};const A={__name:"buy-order",setup(a){const l=T();h("Hello");const m=l.orders;return(o,r)=>(_(),x("div",null,[e(X,{modelValue:d(l).activeTab,"onUpdate:modelValue":r[1]||(r[1]=u=>d(l).activeTab=u),"show-arrows":""},{default:t(()=>[(_(!0),x(O,null,$(d(m),(u,s)=>(_(),g(B,{key:u.name,value:u.tab,onClick:n=>d(l).selectTab(s),color:"warning"},{default:t(()=>[e(k,{size:"20",start:"",icon:"mdi-bell-outline"}),v(" "+G(u.title),1)]),_:2},1032,["value","onClick"]))),128)),e(B,{value:"",onClick:r[0]||(r[0]=u=>d(l).addTab()),color:"warning"},{default:t(()=>[e(k,{size:"20",start:"",icon:"mdi-bell-outline"}),v(" Add ")]),_:1})]),_:1},8,["modelValue"]),e(K),e(j,{modelValue:d(l).activeTab,"onUpdate:modelValue":r[2]||(r[2]=u=>d(l).activeTab=u),class:"mt-5 disable-tab-transition",touch:!1},{default:t(()=>[(_(!0),x(O,null,$(d(m),(u,s)=>(_(),g(Z,{key:u.tab,value:u.tab},{default:t(()=>[e(pe,{items:u.items,index:s},null,8,["items","index"])]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]))}};typeof L=="function"&&L(A);const he=q(A,[["__scopeId","data-v-06777230"]]);export{he as default};
