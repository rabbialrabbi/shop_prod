import{bc as z,b7 as k,b8 as w,b3 as E,G as V,a8 as T,H as f,J as g,K as t,B as e,L as c,b6 as r,S as b,R as y,Y as P,Z as N,_ as U,bd as v,be as L,P as p,X as F,bf as M,bg as H,M as R,bh as S,T as h,N as C,Q as q,F as D,E as O,$ as W}from"./index.6af205fc.js";import{V as G}from"./VAutocomplete.68545785.js";import{h as J}from"./moment.9709ab41.js";import{b as $}from"./route-block.011d1056.js";import{V as B,a as K,b as X,c as Z}from"./VWindowItem.203e65df.js";import"./VSelect.74ebe58c.js";import"./VCheckboxBtn.9a916f04.js";const x=z("buyOrders",{state:()=>({activeTab:"tab1",selectedTab:0,selectedItems:0,totalTab:1,orders:[{title:"buyer1",icon:"mdi-account-outline",tab:"tab1",items:[{product_id:null,quantity:null,unit_price:null,total_price:null}],subtotal:0,discount:0,total:0,pay:0,balance:0}],status:0}),getters:{order:a=>a.orders[a.selectedTab],item:a=>a.orders[a.selectedTab].items[a.selectedItems]},actions:{setUnitType(a){this.unitType=this.createSelectData(a,"name","unit_id")},setCategoryList(a){this.categories=this.createSelectData(a,"name","category_id")},setProductTypeList(a){this.productTypes=a},async updateProductList(a){let l=await k.get(w.getProductList);this.productList=l.data.data},createSelectData(a,l,m){return a.map(i=>({title:i[l],value:i[m]}))},addProductItem(){this.selectedItems++,this.orders[this.selectedTab].items.push({product_id:null,quantity:0,unit_price:0,total_price:0})},addTab(){this.totalTab++;let a=this.totalTab;this.orders.push({title:`buyer${a}`,icon:"mdi-account-outline",tab:`tab${a}`,items:[{product_id:null,quantity:null,unit_price:null,total_price:null}],subtotal:0,discount:0,total:0,pay:0,balance:0})},selectTab(a){this.selectedTab=a,this.activeTab=this.orders[a].tab},updateProductData(){this.item.total_price=parseInt(this.item.unit_price)*parseInt(this.item.quantity||1);let a=0;this.order.items.forEach(l=>{a=a+l.total_price}),this.order.subtotal=a,this.order.total=a-this.order.discount,this.order.balance=this.order.total-this.order.pay,this.order.total=this.order.subtotal-this.order.discount,this.order.balance=this.order.total-this.order.pay},async payment(){let a=this;await k.post(w.buyOrderStore,this.order).then(function(l){l.status&&a.resetOrder()}).catch(function(l){})},resetOrder(){this.orders[this.selectedTab].items=[];let a=this;setTimeout(()=>{a.addProductItem()},100),this.orders[this.selectedTab].subtotal=0,this.orders[this.selectedTab].discount=0,this.orders[this.selectedTab].total=0,this.orders[this.selectedTab].pay=0,this.orders[this.selectedTab].balance=0}}}),j={__name:"ItemInput",setup(a){const l=x(),m=E(),i=V(""),n=V(""),o=V(""),d=V("");return T(i,(s,u)=>{if(s){let _=m.productList.find(A=>A.product_id===s);l.item.product_id=i,l.item.unit_price=_.selling_price,n.value=1,o.value=_.selling_price,d.value=_.selling_price,l.updateProductData()}}),T(n,s=>{s&&(l.item.quantity=s,l.updateProductData(),d.value=l.item.total_price)}),T(o,s=>{s&&(l.item.unit_price=s,l.updateProductData(),d.value=l.item.total_price)}),(s,u)=>(f(),g(y,null,{default:t(()=>[e(c,{cols:"12",lg:"3"},{default:t(()=>[e(G,{modelValue:i.value,"onUpdate:modelValue":u[0]||(u[0]=_=>i.value=_),items:r(m).getProductsSelect,label:"Product",variant:"underlined"},null,8,["modelValue","items"])]),_:1}),e(c,{cols:"12",lg:"3"},{default:t(()=>[e(b,{modelValue:n.value,"onUpdate:modelValue":u[1]||(u[1]=_=>n.value=_),label:"Unit Amount",placeholder:"Unit Amount",variant:"underlined",type:"number"},null,8,["modelValue"])]),_:1}),e(c,{cols:"12",lg:"3"},{default:t(()=>[e(b,{modelValue:o.value,"onUpdate:modelValue":u[2]||(u[2]=_=>o.value=_),label:"Price",variant:"underlined",type:"number"},null,8,["modelValue"])]),_:1}),e(c,{cols:"12",lg:"3"},{default:t(()=>[e(b,{modelValue:d.value,"onUpdate:modelValue":u[3]||(u[3]=_=>d.value=_),label:"Subtotal",variant:"underlined",type:"number",readonly:""},null,8,["modelValue"])]),_:1})]),_:1}))}},Q={__name:"OrderItem",props:["tab"],setup(a){const m=a.tab,i=x();return(n,o)=>(f(),g(v,null,{default:t(()=>[(f(!0),P(N,null,U(r(i).orders[r(m)].items,(d,s)=>(f(),g(j,{key:s,item:s,tab:r(m),onClick:u=>r(i).selectedItems=s},null,8,["item","tab","onClick"]))),128))]),_:1}))}};const I=a=>(M("data-v-cd4c9671"),a=a(),H(),a),ee=I(()=>p("td",null,"SubTotal",-1)),te={class:"text-center"},le=I(()=>p("td",null,"Discount",-1)),ae={class:"text-center"},oe=I(()=>p("td",null,"Total",-1)),de={class:"text-center"},se=I(()=>p("td",null,"Pay",-1)),re={class:"text-center"},ue=I(()=>p("td",null,"Balance",-1)),ne={class:"text-center"},ie={__name:"Subtotal",setup(a){const l=x(),m=V(l.order.discount),i=V(l.order.pay);return T(m,n=>{l.order.subtotal>0&&(l.order.discount=n,l.updateProductData())}),T(i,n=>{l.order.subtotal>0&&(l.order.pay=n,l.updateProductData())}),(n,o)=>(f(),g(F,null,{default:t(()=>[p("tbody",null,[p("tr",null,[ee,p("td",te,[e(b,{modelValue:r(l).order.subtotal,"onUpdate:modelValue":o[0]||(o[0]=d=>r(l).order.subtotal=d),type:"number",placeholder:"Discount",variant:"plain",class:"centered-input",readonly:""},null,8,["modelValue"])])]),p("tr",null,[le,p("td",ae,[e(b,{modelValue:m.value,"onUpdate:modelValue":o[1]||(o[1]=d=>m.value=d),type:"number",placeholder:"Discount",variant:"plain",class:"centered-input"},null,8,["modelValue"])])]),p("tr",null,[oe,p("td",de,[e(b,{modelValue:r(l).order.total,"onUpdate:modelValue":o[2]||(o[2]=d=>r(l).order.total=d),type:"number",placeholder:"Discount",variant:"solo-filled",class:"centered-input input-shadow input-warning",readonly:""},null,8,["modelValue"])])]),p("tr",null,[se,p("td",re,[e(b,{modelValue:i.value,"onUpdate:modelValue":o[3]||(o[3]=d=>i.value=d),type:"number",placeholder:"Pay",variant:"solo-filled",class:"centered-input input-shadow input-success"},null,8,["modelValue"])])]),p("tr",null,[ue,p("td",ne,[e(b,{modelValue:r(l).order.balance,"onUpdate:modelValue":o[4]||(o[4]=d=>r(l).order.balance=d),type:"number",placeholder:"Discount",variant:"solo-filled",class:"centered-input input-shadow input-danger",readonly:""},null,8,["modelValue"])])])])]),_:1}))}},ce=L(ie,[["__scopeId","data-v-cd4c9671"]]),me={__name:"CreateOrder",props:["index"],setup(a){const l=a;let m=J().format("YYYY-MM-DD");const i=V(m),n=l.index,o=x();return(d,s)=>(f(),g(y,null,{default:t(()=>[e(c,{md:"6",lg:"12",cols:"12"},{default:t(()=>[e(R,null,{default:t(()=>[e(y,{"no-gutters":""},{default:t(()=>[e(c,{cols:"12",sm:"8",md:"12",lg:"6",order:"2","order-lg":"1"},{default:t(()=>[e(v,null,{default:t(()=>[e(S,null,{default:t(()=>[h("Buyer")]),_:1})]),_:1}),e(C,null,{default:t(()=>[e(y,null,{default:t(()=>[e(c,{cols:"12",md:"6"},{default:t(()=>[e(b,{modelValue:d.firstName,"onUpdate:modelValue":s[0]||(s[0]=u=>d.firstName=u),label:"Buyer Name",placeholder:"Buyer Name"},null,8,["modelValue"])]),_:1}),e(c,{cols:"12",md:"6"},{default:t(()=>[e(b,{modelValue:d.firstName,"onUpdate:modelValue":s[1]||(s[1]=u=>d.firstName=u),label:"Contact No",placeholder:"Contact No"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(c,{cols:"12",sm:"4",md:"12",lg:"6",order:"1","order-lg":"2"},{default:t(()=>[e(v,null,{default:t(()=>[e(S,null,{default:t(()=>[h("Order")]),_:1})]),_:1}),e(C,null,{default:t(()=>[e(y,null,{default:t(()=>[e(c,{cols:"12",md:"6"},{default:t(()=>[e(b,{modelValue:d.firstName,"onUpdate:modelValue":s[2]||(s[2]=u=>d.firstName=u),label:"Order No",placeholder:"Order No",readonly:""},null,8,["modelValue"])]),_:1}),e(c,{cols:"12",md:"6"},{default:t(()=>[e(b,{modelValue:i.value,"onUpdate:modelValue":s[3]||(s[3]=u=>i.value=u),label:"Contact No",placeholder:"Contact No",readonly:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(S,null,{default:t(()=>[h("Items")]),_:1})]),_:1}),e(C,null,{default:t(()=>[e(q)]),_:1}),e(Q,{tab:r(n)},null,8,["tab"]),e(v,null,{default:t(()=>[e(D,{block:"",onClick:s[4]||(s[4]=u=>r(o).addProductItem()),class:"bg-warning"},{default:t(()=>[e(O,{size:"2rem",icon:"material-symbols:add-circle-outline-rounded"})]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(y,{class:"pa-x ma-x"},{default:t(()=>[e(c,{md:"6",lg:"8",cols:"12",class:"pa-x ma-x"}),e(c,{md:"6",lg:"4",cols:"12"},{default:t(()=>[e(ce)]),_:1})]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(y,{class:"pa-x ma-x"},{default:t(()=>[e(c,{md:"6",lg:"8",cols:"12",class:"pa-x ma-x"}),e(c,{md:"6",lg:"4",cols:"12"},{default:t(()=>[e(y,null,{default:t(()=>[e(c,{md:"6",lg:"6",cols:"12",class:"text-center"},{default:t(()=>[e(D,{class:"bg-warning"},{default:t(()=>[h(" Save ")]),_:1})]),_:1}),e(c,{md:"6",lg:"6",cols:"12",class:"text-center"},{default:t(()=>[e(D,{class:"bg-success",onClick:s[5]||(s[5]=u=>r(o).payment())},{default:t(()=>[h(" Payment ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}};const Y={__name:"buy-order",setup(a){const l=x();V("Hello");const m=l.orders;return(i,n)=>(f(),P("div",null,[e(K,{modelValue:r(l).activeTab,"onUpdate:modelValue":n[1]||(n[1]=o=>r(l).activeTab=o),"show-arrows":""},{default:t(()=>[(f(!0),P(N,null,U(r(m),(o,d)=>(f(),g(B,{key:o.name,value:o.tab,onClick:s=>r(l).selectTab(d),color:"warning"},{default:t(()=>[e(O,{size:"20",start:"",icon:"mdi-bell-outline"}),h(" "+W(o.title),1)]),_:2},1032,["value","onClick"]))),128)),e(B,{value:"",onClick:n[0]||(n[0]=o=>r(l).addTab()),color:"warning"},{default:t(()=>[e(O,{size:"20",start:"",icon:"mdi-bell-outline"}),h(" Add ")]),_:1})]),_:1},8,["modelValue"]),e(q),e(Z,{modelValue:r(l).activeTab,"onUpdate:modelValue":n[2]||(n[2]=o=>r(l).activeTab=o),class:"mt-5 disable-tab-transition",touch:!1},{default:t(()=>[(f(!0),P(N,null,U(r(m),(o,d)=>(f(),g(X,{key:o.tab,value:o.tab},{default:t(()=>[e(me,{items:o.items,index:d},null,8,["items","index"])]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]))}};typeof $=="function"&&$(Y);const he=L(Y,[["__scopeId","data-v-06777230"]]);export{he as default};
