import{bd as z,b7 as k,b8 as $,aT as E,G as h,a8 as P,H as f,J as g,K as l,B as e,L as c,aW as d,S as p,R as y,Y as x,Z as U,_ as D,be as V,bf as q,X as B,P as m,bg as F,bh as H,M,bc as I,T as v,N as C,Q as K,F as S,E as N,$ as W}from"./index.2374c896.js";import{V as R}from"./VAutocomplete.047d8e65.js";import{h as G}from"./moment.9709ab41.js";import{b as w}from"./route-block.011d1056.js";import{V as L,a as J,b as X,c as Z}from"./VWindowItem.a9985ab5.js";import"./VSelect.7962ac83.js";import"./VCheckboxBtn.9d973e1a.js";const T=z("buyOrders",{state:()=>({activeTab:"tab1",selectedTab:0,selectedItems:0,totalTab:1,orders:[{title:"buyer1",icon:"mdi-account-outline",tab:"tab1",items:[{product_id:null,quantity:null,unit_price:null,total_price:null}],subtotal:0,charge:0,discount:0,collection:0,total:0,pay:0,balance:0}],status:0}),getters:{order:a=>a.orders[a.selectedTab],item:a=>a.orders[a.selectedTab].items[a.selectedItems]},actions:{setUnitType(a){this.unitType=this.createSelectData(a,"name","unit_id")},setCategoryList(a){this.categories=this.createSelectData(a,"name","category_id")},setProductTypeList(a){this.productTypes=a},async updateProductList(a){let t=await k.get($.getProductList);this.productList=t.data.data},createSelectData(a,t,b){return a.map(o=>({title:o[t],value:o[b]}))},addProductItem(){this.selectedItems++,this.orders[this.selectedTab].items.push({product_id:null,quantity:0,unit_price:0,total_price:0})},addTab(){this.totalTab++;let a=this.totalTab;this.orders.push({title:`buyer${a}`,icon:"mdi-account-outline",tab:`tab${a}`,items:[{product_id:null,quantity:null,unit_price:null,total_price:null}],subtotal:0,charge:0,discount:0,collection:0,total:0,pay:0,balance:0})},selectTab(a){this.selectedTab=a,this.activeTab=this.orders[a].tab},updateProductData(){this.item.total_price=parseInt(this.item.unit_price)*parseInt(this.item.quantity||1);let a=0;this.order.items.forEach(t=>{a=a+t.total_price}),console.log("Hello"),this.order.subtotal=a,this.order.total=a+this.order.discount,this.order.balance=this.order.total-this.order.pay,this.order.total=this.order.subtotal+this.order.charge+this.order.collection-this.order.discount,this.order.balance=this.order.total-this.order.pay},async payment(){let a=this;await k.post($.buyOrderStore,this.order).then(function(t){t.status&&a.resetOrder()}).catch(function(t){})},resetOrder(){this.orders[this.selectedTab].items=[];let a=this;setTimeout(()=>{a.addProductItem()},100),this.orders[this.selectedTab].subtotal=0,this.orders[this.selectedTab].discount=0,this.orders[this.selectedTab].total=0,this.orders[this.selectedTab].pay=0,this.orders[this.selectedTab].balance=0}}}),j={__name:"ItemInput",setup(a){const t=T(),b=E(),o=h(""),r=h(""),u=h(""),i=h("");return P(o,(s,n)=>{if(s){let _=b.productList.find(A=>A.product_id===s);t.item.product_id=o,t.item.unit_price=_.selling_price,r.value=1,u.value=_.selling_price,i.value=_.selling_price,t.updateProductData()}}),P(r,s=>{s&&(t.item.quantity=s,t.updateProductData(),i.value=t.item.total_price)}),P(u,s=>{s&&(t.item.unit_price=s,t.updateProductData(),i.value=t.item.total_price)}),(s,n)=>(f(),g(y,null,{default:l(()=>[e(c,{cols:"12",lg:"3"},{default:l(()=>[e(R,{modelValue:o.value,"onUpdate:modelValue":n[0]||(n[0]=_=>o.value=_),items:d(b).getProductsSelect,label:"Product",variant:"underlined"},null,8,["modelValue","items"])]),_:1}),e(c,{cols:"12",lg:"3"},{default:l(()=>[e(p,{modelValue:r.value,"onUpdate:modelValue":n[1]||(n[1]=_=>r.value=_),label:"Unit Amount",placeholder:"Unit Amount",variant:"underlined",type:"number"},null,8,["modelValue"])]),_:1}),e(c,{cols:"12",lg:"3"},{default:l(()=>[e(p,{modelValue:u.value,"onUpdate:modelValue":n[2]||(n[2]=_=>u.value=_),label:"Price",variant:"underlined",type:"number"},null,8,["modelValue"])]),_:1}),e(c,{cols:"12",lg:"3"},{default:l(()=>[e(p,{modelValue:i.value,"onUpdate:modelValue":n[3]||(n[3]=_=>i.value=_),label:"Subtotal",variant:"underlined",type:"number",readonly:""},null,8,["modelValue"])]),_:1})]),_:1}))}},Q={__name:"OrderItem",props:["tab"],setup(a){const b=a.tab,o=T();return(r,u)=>(f(),g(V,null,{default:l(()=>[(f(!0),x(U,null,D(d(o).orders[d(b)].items,(i,s)=>(f(),g(j,{key:s,item:s,tab:d(b),onClick:n=>d(o).selectedItems=s},null,8,["item","tab","onClick"]))),128))]),_:1}))}};const O=a=>(F("data-v-cc1a7bb0"),a=a(),H(),a),ee={class:"text-center"},te={class:"text-center"},le={class:"text-center"},ae={class:"text-center"},oe=O(()=>m("td",null,"Total",-1)),de={class:"text-center"},re=O(()=>m("td",null,"Pay",-1)),se={class:"text-center"},ue=O(()=>m("td",null,"Balance",-1)),ne={class:"text-center"},ie={__name:"Subtotal",setup(a){const t=T();return(b,o)=>(f(),g(y,{class:"pa-x ma-x"},{default:l(()=>[e(c,{md:"6",lg:"8",cols:"12",class:"pa-x ma-x"},{default:l(()=>[e(B,null,{default:l(()=>[m("tbody",null,[m("tr",null,[m("td",ee,[e(p,{modelValue:d(t).order.subtotal,"onUpdate:modelValue":o[0]||(o[0]=r=>d(t).order.subtotal=r),type:"number",variant:"underlined",class:"centered-input",label:"Subtotal",readonly:""},null,8,["modelValue"])]),m("td",te,[e(p,{modelValue:d(t).order.charge,"onUpdate:modelValue":o[1]||(o[1]=r=>d(t).order.charge=r),onKeyup:o[2]||(o[2]=r=>d(t).updateProductData()),type:"number",variant:"underlined",class:"centered-input",label:"Charge"},null,8,["modelValue"])]),m("td",le,[e(p,{modelValue:d(t).order.discount,"onUpdate:modelValue":o[3]||(o[3]=r=>d(t).order.discount=r),onKeyup:o[4]||(o[4]=r=>d(t).updateProductData()),type:"number",class:"centered-input",variant:"underlined",label:"Discount"},null,8,["modelValue"])]),m("td",ae,[e(p,{modelValue:d(t).order.collection,"onUpdate:modelValue":o[5]||(o[5]=r=>d(t).order.collection=r),onKeyup:o[6]||(o[6]=r=>d(t).updateProductData()),type:"number",class:"centered-input",variant:"underlined",label:"Collection"},null,8,["modelValue"])])])])]),_:1})]),_:1}),e(c,{md:"6",lg:"4",cols:"12"},{default:l(()=>[e(B,null,{default:l(()=>[m("tbody",null,[m("tr",null,[oe,m("td",de,[e(p,{modelValue:d(t).order.total,"onUpdate:modelValue":o[7]||(o[7]=r=>d(t).order.total=r),type:"number",placeholder:"Discount",variant:"solo-filled",class:"centered-input",readonly:""},null,8,["modelValue"])])]),m("tr",null,[re,m("td",se,[e(p,{modelValue:d(t).order.pay,"onUpdate:modelValue":o[8]||(o[8]=r=>d(t).order.pay=r),onKeyup:o[9]||(o[9]=r=>d(t).updateProductData()),type:"number",placeholder:"Pay",variant:"solo-filled",class:"centered-input"},null,8,["modelValue"])])]),m("tr",null,[ue,m("td",ne,[e(p,{modelValue:d(t).order.balance,"onUpdate:modelValue":o[10]||(o[10]=r=>d(t).order.balance=r),type:"number",placeholder:"Discount",variant:"solo-filled",class:"centered-input",readonly:""},null,8,["modelValue"])])])])]),_:1})]),_:1})]),_:1}))}},ce=q(ie,[["__scopeId","data-v-cc1a7bb0"]]),me={__name:"CreateOrder",props:["index"],setup(a){const t=a;let b=G().format("YYYY-MM-DD");const o=h(b),r=t.index,u=T();return(i,s)=>(f(),g(y,null,{default:l(()=>[e(c,{md:"6",lg:"12",cols:"12"},{default:l(()=>[e(M,null,{default:l(()=>[e(y,{"no-gutters":""},{default:l(()=>[e(c,{cols:"12",sm:"8",md:"12",lg:"6",order:"2","order-lg":"1"},{default:l(()=>[e(V,null,{default:l(()=>[e(I,null,{default:l(()=>[v("Buyer")]),_:1})]),_:1}),e(C,null,{default:l(()=>[e(y,null,{default:l(()=>[e(c,{cols:"12",md:"6"},{default:l(()=>[e(p,{modelValue:i.firstName,"onUpdate:modelValue":s[0]||(s[0]=n=>i.firstName=n),label:"Buyer Name",placeholder:"Buyer Name"},null,8,["modelValue"])]),_:1}),e(c,{cols:"12",md:"6"},{default:l(()=>[e(p,{modelValue:i.firstName,"onUpdate:modelValue":s[1]||(s[1]=n=>i.firstName=n),label:"Contact No",placeholder:"Contact No"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(c,{cols:"12",sm:"4",md:"12",lg:"6",order:"1","order-lg":"2"},{default:l(()=>[e(V,null,{default:l(()=>[e(I,null,{default:l(()=>[v("Order")]),_:1})]),_:1}),e(C,null,{default:l(()=>[e(y,null,{default:l(()=>[e(c,{cols:"12",md:"6"},{default:l(()=>[e(p,{modelValue:i.firstName,"onUpdate:modelValue":s[2]||(s[2]=n=>i.firstName=n),label:"Order No",placeholder:"Order No",readonly:""},null,8,["modelValue"])]),_:1}),e(c,{cols:"12",md:"6"},{default:l(()=>[e(p,{modelValue:o.value,"onUpdate:modelValue":s[3]||(s[3]=n=>o.value=n),label:"Contact No",placeholder:"Contact No",readonly:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(V,null,{default:l(()=>[e(I,null,{default:l(()=>[v("Items")]),_:1})]),_:1}),e(C,null,{default:l(()=>[e(K)]),_:1}),e(Q,{tab:d(r)},null,8,["tab"]),e(V,null,{default:l(()=>[e(S,{block:"",onClick:s[4]||(s[4]=n=>d(u).addProductItem()),class:"bg-warning"},{default:l(()=>[e(N,{size:"2rem",icon:"material-symbols:add-circle-outline-rounded"})]),_:1})]),_:1}),e(V,null,{default:l(()=>[e(ce)]),_:1}),e(V,null,{default:l(()=>[e(y,{class:"pa-x ma-x"},{default:l(()=>[e(c,{md:"6",lg:"8",cols:"12",class:"pa-x ma-x"}),e(c,{md:"6",lg:"4",cols:"12"},{default:l(()=>[e(y,null,{default:l(()=>[e(c,{md:"6",lg:"6",cols:"12",class:"text-center"},{default:l(()=>[e(S,{class:"bg-warning"},{default:l(()=>[v(" Save ")]),_:1})]),_:1}),e(c,{md:"6",lg:"6",cols:"12",class:"text-center"},{default:l(()=>[e(S,{class:"bg-success",onClick:s[5]||(s[5]=n=>d(u).payment())},{default:l(()=>[v(" Payment ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}};const Y={__name:"buy-order",setup(a){const t=T();h("Hello");const b=t.orders;return(o,r)=>(f(),x("div",null,[e(J,{modelValue:d(t).activeTab,"onUpdate:modelValue":r[1]||(r[1]=u=>d(t).activeTab=u),"show-arrows":""},{default:l(()=>[(f(!0),x(U,null,D(d(b),(u,i)=>(f(),g(L,{key:u.name,value:u.tab,onClick:s=>d(t).selectTab(i),color:"warning"},{default:l(()=>[e(N,{size:"20",start:"",icon:"mdi-bell-outline"}),v(" "+W(u.title),1)]),_:2},1032,["value","onClick"]))),128)),e(L,{value:"",onClick:r[0]||(r[0]=u=>d(t).addTab()),color:"warning"},{default:l(()=>[e(N,{size:"20",start:"",icon:"mdi-bell-outline"}),v(" Add ")]),_:1})]),_:1},8,["modelValue"]),e(K),e(Z,{modelValue:d(t).activeTab,"onUpdate:modelValue":r[2]||(r[2]=u=>d(t).activeTab=u),class:"mt-5 disable-tab-transition",touch:!1},{default:l(()=>[(f(!0),x(U,null,D(d(b),(u,i)=>(f(),g(X,{key:u.tab,value:u.tab},{default:l(()=>[e(me,{items:u.items,index:i},null,8,["items","index"])]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]))}};typeof w=="function"&&w(Y);const ge=q(Y,[["__scopeId","data-v-06777230"]]);export{ge as default};
