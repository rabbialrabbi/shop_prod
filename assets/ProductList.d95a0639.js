import{a as ue,aK as ne,u as oe,aX as he,n as R,aL as we,a9 as de,aM as re,aN as ie,G as y,B as e,af as L,aY as Te,aZ as Se,aO as se,a_ as ke,a$ as Ae,aV as Z,a8 as k,b0 as Fe,b1 as Ie,b2 as qe,Z as Q,an as le,ao as Re,b3 as Be,b4 as De,aA as $e,ax as ae,b5 as Ne,aw as je,ab as Le,aT as z,aU as ce,H as B,J,K as l,L as u,M as W,N as pe,U as ve,R as b,b6 as me,F as D,T as $,S as g,aW as T,b7 as fe,b8 as _e,Y,P as V,_ as Qe,$ as S,E as Me,X as He}from"./index.2374c896.js";import"./moment.9709ab41.js";import{V as ye}from"./VForm.25e0924a.js";import{V as N}from"./VAutocomplete.047d8e65.js";import{a as ze,b as Ge,c as Ee}from"./VCheckboxBtn.9d973e1a.js";import{V as Ke}from"./VDialog.c137d79e.js";const Ve=ue({name:"VSwitch",inheritAttrs:!1,props:{indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...ne(),...ze()},emits:{"update:indeterminate":t=>!0},setup(t,f){let{attrs:v,slots:o}=f;const c=oe(t,"indeterminate"),{loaderClasses:s}=he(t),i=R(()=>typeof t.loading=="string"&&t.loading!==""?t.loading:t.color),_=we(),n=R(()=>t.id||`switch-${_}`);function d(){c.value&&(c.value=!1)}return de(()=>{const[U,m]=re(v),[a,r]=ie(t),[M,X]=Ge(t),A=y();function G(){var F,I;(F=A.value)==null||(I=F.input)==null||I.click()}return e(se,L({class:["v-switch",{"v-switch--inset":t.inset},{"v-switch--indeterminate":c.value},s.value]},U,a,{id:n.value}),{...o,default:F=>{let{id:I,isDisabled:P,isReadonly:h,isValid:q}=F;return e(Ee,L({ref:A},M,{id:I.value,type:"checkbox","onUpdate:modelValue":d,"aria-checked":c.value?"mixed":void 0,disabled:P.value,readonly:h.value},m),{...o,default:()=>e("div",{class:"v-switch__track",onClick:G},null),input:p=>{let{textColorClasses:C}=p;return e("div",{class:["v-switch__thumb",C.value]},[t.loading&&e(Te,{name:"v-switch",active:!0,color:q.value===!1?void 0:i.value},{default:x=>o.loader?o.loader(x):e(Se,{active:x.isActive,color:x.color,indeterminate:!0,size:"16",width:"2"},null)})])}})}})}),{}}});const ge=ue({name:"VTextarea",directives:{Intersect:ke},inheritAttrs:!1,props:{autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,hint:String,persistentHint:Boolean,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:t=>!isNaN(parseFloat(t))},maxRows:{type:[Number,String],validator:t=>!isNaN(parseFloat(t))},suffix:String,...ne(),...Ae()},emits:{"click:control":t=>!0,"update:modelValue":t=>!0},setup(t,f){let{attrs:v,emit:o,slots:c}=f;const s=oe(t,"modelValue"),i=R(()=>typeof t.counterValue=="function"?t.counterValue(s.value):(s.value||"").toString().length),_=R(()=>{if(v.maxlength)return v.maxlength;if(!(!t.counter||typeof t.counter!="number"&&typeof t.counter!="string"))return t.counter});function n(p,C){var x,w;!t.autofocus||!p||(x=C[0].target)==null||(w=x.focus)==null||w.call(x)}const d=y(),U=y(),m=y(!1),a=y(""),r=y(),M=R(()=>m.value||t.persistentPlaceholder),X=R(()=>t.messages.length?t.messages:M.value||t.persistentHint?t.hint:"");function A(){if(r.value!==document.activeElement){var p;(p=r.value)==null||p.focus()}m.value||(m.value=!0)}function G(p){A(),o("click:control",p)}function F(p){p.stopPropagation(),A(),ae(()=>{s.value="",Ne(t["onClick:clear"],p)})}function I(p){s.value=p.target.value}const P=y();function h(){!t.autoGrow||ae(()=>{if(!P.value||!U.value)return;const p=getComputedStyle(P.value),C=getComputedStyle(U.value.$el),x=parseFloat(p.getPropertyValue("--v-field-padding-top"))+parseFloat(p.getPropertyValue("--v-input-padding-top"))+parseFloat(p.getPropertyValue("--v-field-padding-bottom")),w=P.value.scrollHeight,E=parseFloat(p.lineHeight),K=Math.max(parseFloat(t.rows)*E+x,parseFloat(C.getPropertyValue("--v-input-control-height"))),O=parseFloat(t.maxRows)*E+x||1/0;a.value=je(Le(w!=null?w:0,K,O))})}Z(h),k(s,h),k(()=>t.rows,h),k(()=>t.maxRows,h),k(()=>t.density,h);let q;return k(P,p=>{if(p)q=new ResizeObserver(h),q.observe(P.value);else{var C;(C=q)==null||C.disconnect()}}),Fe(()=>{var p;(p=q)==null||p.disconnect()}),de(()=>{const p=!!(c.counter||t.counter||t.counterValue),C=!!(p||c.details),[x,w]=re(v),[{modelValue:E,...K}]=ie(t),[O]=Ie(t);return e(se,L({ref:d,modelValue:s.value,"onUpdate:modelValue":j=>s.value=j,class:["v-textarea v-text-field",{"v-textarea--prefixed":t.prefix,"v-textarea--suffixed":t.suffix,"v-text-field--prefixed":t.prefix,"v-text-field--suffixed":t.suffix,"v-textarea--auto-grow":t.autoGrow,"v-textarea--no-resize":t.noResize||t.autoGrow,"v-text-field--flush-details":["plain","underlined"].includes(t.variant)}],"onClick:prepend":t["onClick:prepend"],"onClick:append":t["onClick:append"]},x,K,{messages:X.value}),{...c,default:j=>{let{isDisabled:H,isDirty:ee,isReadonly:be,isValid:xe}=j;return e(qe,L({ref:U,style:{"--v-textarea-control-height":a.value},"onClick:control":G,"onClick:clear":F,"onClick:prependInner":t["onClick:prependInner"],"onClick:appendInner":t["onClick:appendInner"],role:"textbox"},O,{active:M.value||ee.value,dirty:ee.value||t.dirty,focused:m.value,error:xe.value===!1}),{...c,default:Ce=>{let{props:{class:te,...Ue}}=Ce;return e(Q,null,[t.prefix&&e("span",{class:"v-text-field__prefix"},[t.prefix]),le(e("textarea",L({ref:r,class:te,value:s.value,onInput:I,autofocus:t.autofocus,readonly:be.value,disabled:H.value,placeholder:t.placeholder,rows:t.rows,name:t.name,onFocus:A,onBlur:()=>m.value=!1},Ue,w),null),[[Re("intersect"),{handler:n},null,{once:!0}]]),t.autoGrow&&le(e("textarea",{class:[te,"v-textarea__sizer"],"onUpdate:modelValue":Pe=>s.value=Pe,ref:P,readonly:!0,"aria-hidden":"true"},null),[[Be,s.value]]),t.suffix&&e("span",{class:"v-text-field__suffix"},[t.suffix])])}})},details:C?j=>{var H;return e(Q,null,[(H=c.details)==null?void 0:H.call(c,j),p&&e(Q,null,[e("span",null,null),e(De,{active:t.persistentCounter||m.value,value:i.value,max:_.value},c.counter)])])}:void 0})}),$e({},d,U,r)}}),rt={__name:"AddProduct",setup(t){z();const f=ce();Z(async()=>{await f.updateCategoryList(),await f.updateProductTypeList(),await f.updateUnitTypeList()});const v={name:null,category_id:null,product_type_id:null,unit_amount:null,unit_id:null,description:null,selling_price:null,cost_adjust_type:!0,cost:null,available_qty:null,reserved_qty:null,in_transit_qty:null},o=y(structuredClone(v)),c=y(),s=y([]);k(c,_=>{let n=f.productTypes;o.value.category_id=_,n=n.filter(d=>d.category_id===_),n=n.map(d=>({title:d.name,value:d.product_type_id})),s.value=n});const i=async()=>{try{const _=await fe.post(_e.createProduct,o.value);console.log(_.data),_.data.status&&(o.value=y(structuredClone(v)),c.value=null)}catch(_){console.log(_)}};return(_,n)=>(B(),J(b,{justify:"center"},{default:l(()=>[e(u,{cols:"12",md:"10"},{default:l(()=>[e(W,{title:"Add Product"},{default:l(()=>[e(pe,null,{default:l(()=>[e(ye,{onSubmit:n[12]||(n[12]=ve(()=>{},["prevent"]))},{default:l(()=>[e(b,null,{default:l(()=>[e(u,{cols:"12",md:"2"},{default:l(()=>[e(me,{width:"100%",src:"https://images.pexels.com/photos/90946/pexels-photo-90946.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"}),e(D,{justify:"center",width:"100%",class:"mt-3"},{default:l(()=>[$(" Upload ")]),_:1})]),_:1}),e(u,{cols:"12",md:"5"},{default:l(()=>[e(u,{cols:"12"},{default:l(()=>[e(g,{modelValue:o.value.name,"onUpdate:modelValue":n[0]||(n[0]=d=>o.value.name=d),label:"Product Name",placeholder:"Product Name",variant:"underlined"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12"},{default:l(()=>[e(N,{modelValue:c.value,"onUpdate:modelValue":n[1]||(n[1]=d=>c.value=d),items:T(f).getCategoriesSelect,label:"Category",placeholder:"Category",variant:"underlined"},null,8,["modelValue","items"])]),_:1}),e(u,{cols:"12"},{default:l(()=>[e(N,{modelValue:o.value.product_type_id,"onUpdate:modelValue":n[2]||(n[2]=d=>o.value.product_type_id=d),items:s.value,label:"Product Type",placeholder:"Product Type",variant:"underlined"},null,8,["modelValue","items"])]),_:1}),e(u,{cols:"12"},{default:l(()=>[e(b,null,{default:l(()=>[e(u,{cols:"6"},{default:l(()=>[e(g,{modelValue:o.value.unit_amount,"onUpdate:modelValue":n[3]||(n[3]=d=>o.value.unit_amount=d),label:"Unit Amount",placeholder:"Unit Amount",variant:"underlined",type:"number"},null,8,["modelValue"])]),_:1}),e(u,{cols:"6"},{default:l(()=>[e(N,{modelValue:o.value.unit_id,"onUpdate:modelValue":n[4]||(n[4]=d=>o.value.unit_id=d),items:T(f).getUnitTypeSelect,label:"Unit Type",placeholder:"Unit Type",variant:"underlined"},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1}),e(u,{cols:"12"},{default:l(()=>[e(ge,{modelValue:o.value.description,"onUpdate:modelValue":n[5]||(n[5]=d=>o.value.description=d),label:"Description",placeholder:"Description",variant:"underlined"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{cols:"12",md:"5"},{default:l(()=>[e(u,{cols:"12"},{default:l(()=>[e(b,null,{default:l(()=>[e(u,{cols:"6"},{default:l(()=>[e(g,{modelValue:o.value.selling_price,"onUpdate:modelValue":n[6]||(n[6]=d=>o.value.selling_price=d),label:"Selling Price",placeholder:"Selling Price",variant:"underlined",type:"number"},null,8,["modelValue"])]),_:1}),e(u,{cols:"6"},{default:l(()=>[e(Ve,{modelValue:o.value.cost_adjust_type,"onUpdate:modelValue":n[7]||(n[7]=d=>o.value.cost_adjust_type=d),label:"Adjust",variant:"underlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(u,{cols:"12"},{default:l(()=>[e(b,null,{default:l(()=>[e(u,{cols:"6"},{default:l(()=>[e(g,{modelValue:o.value.cost,"onUpdate:modelValue":n[8]||(n[8]=d=>o.value.cost=d),label:"Cost",placeholder:"Cost",variant:"underlined",type:"number"},null,8,["modelValue"])]),_:1}),e(u,{cols:"6"},{default:l(()=>[e(g,{modelValue:o.value.available_qty,"onUpdate:modelValue":n[9]||(n[9]=d=>o.value.available_qty=d),label:"Available Qty",placeholder:"Available Qty",variant:"underlined",type:"number"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(u,{cols:"12"},{default:l(()=>[e(b,null,{default:l(()=>[e(u,{cols:"6"},{default:l(()=>[e(g,{modelValue:o.value.reserved_qty,"onUpdate:modelValue":n[10]||(n[10]=d=>o.value.reserved_qty=d),label:"Reserved Qty",placeholder:"Reserved Qty",variant:"underlined",type:"number"},null,8,["modelValue"])]),_:1}),e(u,{cols:"6"},{default:l(()=>[e(g,{modelValue:o.value.in_transit_qty,"onUpdate:modelValue":n[11]||(n[11]=d=>o.value.in_transit_qty=d),label:"In Transit Qty",placeholder:"In Transit Qty",variant:"underlined",type:"number"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(u,{cols:"12",class:"d-flex gap-4"},{default:l(()=>[e(D,{type:"submit",onClick:i},{default:l(()=>[$(" Submit ")]),_:1}),e(D,{type:"reset",color:"secondary",variant:"tonal"},{default:l(()=>[$(" Reset ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}},Oe={__name:"ProductEdit",props:["product"],setup(t){const f=t;let v=f.product;const o=z(),c=ce();Z(async()=>{await c.updateCategoryList(),await c.updateProductTypeList(),await c.updateUnitTypeList()});const s={name:v.name,category_id:v.category_id,product_type_id:v.product_type_id,unit_amount:v.unit_amount,unit_id:v.unit_id,description:v.description,selling_price:v.selling_price,cost_adjust_type:v.cost_adjust_type==1,cost:v.cost,available_qty:v.available_qty,reserved_qty:v.reserved_qty,in_transit_qty:v.in_transit_qty},i=y(structuredClone(s)),_=y(s.category_id),d=y((()=>{let m=c.productTypes;return m=m.filter(a=>a.category_id===_.value),m=m.map(a=>({title:a.name,value:a.product_type_id})),m})());k(_,m=>{let a=c.productTypes;i.value.category_id=m,a=a.filter(r=>r.category_id===m),a=a.map(r=>({title:r.name,value:r.product_type_id})),i.value.product_type_id=null,d.value=a});const U=async()=>{try{const m=_e.editProduct+"/"+f.product.product_id,a=await fe.put(m,i.value);await o.updateProductList(),o.editModalStatus=!1}catch(m){console.log(m)}};return(m,a)=>(B(),J(b,{justify:"center"},{default:l(()=>[e(u,{cols:"12",md:"10"},{default:l(()=>[e(W,{title:"Add Product"},{default:l(()=>[e(pe,null,{default:l(()=>[e(ye,{onSubmit:a[12]||(a[12]=ve(()=>{},["prevent"]))},{default:l(()=>[e(b,null,{default:l(()=>[e(u,{cols:"12",md:"2"},{default:l(()=>[e(me,{width:"100%",src:"https://images.pexels.com/photos/90946/pexels-photo-90946.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"}),e(D,{justify:"center",width:"100%",class:"mt-3"},{default:l(()=>[$(" Upload ")]),_:1})]),_:1}),e(u,{cols:"12",md:"5"},{default:l(()=>[e(u,{cols:"12"},{default:l(()=>[e(g,{modelValue:i.value.name,"onUpdate:modelValue":a[0]||(a[0]=r=>i.value.name=r),label:"Product Name",placeholder:"Product Name",variant:"underlined"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12"},{default:l(()=>[e(N,{modelValue:_.value,"onUpdate:modelValue":a[1]||(a[1]=r=>_.value=r),items:T(c).getCategoriesSelect,label:"Category",placeholder:"Category",variant:"underlined"},null,8,["modelValue","items"])]),_:1}),e(u,{cols:"12"},{default:l(()=>[e(N,{modelValue:i.value.product_type_id,"onUpdate:modelValue":a[2]||(a[2]=r=>i.value.product_type_id=r),items:d.value,label:"Product Type",placeholder:"Product Type",variant:"underlined"},null,8,["modelValue","items"])]),_:1}),e(u,{cols:"12"},{default:l(()=>[e(b,null,{default:l(()=>[e(u,{cols:"6"},{default:l(()=>[e(g,{modelValue:i.value.unit_amount,"onUpdate:modelValue":a[3]||(a[3]=r=>i.value.unit_amount=r),label:"Unit Amount",placeholder:"Unit Amount",variant:"underlined",type:"number"},null,8,["modelValue"])]),_:1}),e(u,{cols:"6"},{default:l(()=>[e(N,{modelValue:i.value.unit_id,"onUpdate:modelValue":a[4]||(a[4]=r=>i.value.unit_id=r),items:T(c).getUnitTypeSelect,label:"Unit Type",placeholder:"Unit Type",variant:"underlined"},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1}),e(u,{cols:"12"},{default:l(()=>[e(ge,{modelValue:i.value.description,"onUpdate:modelValue":a[5]||(a[5]=r=>i.value.description=r),label:"Description",placeholder:"Description",variant:"underlined"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{cols:"12",md:"5"},{default:l(()=>[e(u,{cols:"12"},{default:l(()=>[e(b,null,{default:l(()=>[e(u,{cols:"6"},{default:l(()=>[e(g,{modelValue:i.value.selling_price,"onUpdate:modelValue":a[6]||(a[6]=r=>i.value.selling_price=r),label:"Selling Price",placeholder:"Selling Price",variant:"underlined",type:"number"},null,8,["modelValue"])]),_:1}),e(u,{cols:"6"},{default:l(()=>[e(Ve,{modelValue:i.value.cost_adjust_type,"onUpdate:modelValue":a[7]||(a[7]=r=>i.value.cost_adjust_type=r),label:"Adjust",variant:"underlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(u,{cols:"12"},{default:l(()=>[e(b,null,{default:l(()=>[e(u,{cols:"6"},{default:l(()=>[e(g,{modelValue:i.value.cost,"onUpdate:modelValue":a[8]||(a[8]=r=>i.value.cost=r),label:"Cost",placeholder:"Cost",variant:"underlined",type:"number"},null,8,["modelValue"])]),_:1}),e(u,{cols:"6"},{default:l(()=>[e(g,{modelValue:i.value.available_qty,"onUpdate:modelValue":a[9]||(a[9]=r=>i.value.available_qty=r),label:"Available Qty",placeholder:"Available Qty",variant:"underlined",type:"number"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(u,{cols:"12"},{default:l(()=>[e(b,null,{default:l(()=>[e(u,{cols:"6"},{default:l(()=>[e(g,{modelValue:i.value.reserved_qty,"onUpdate:modelValue":a[10]||(a[10]=r=>i.value.reserved_qty=r),label:"Reserved Qty",placeholder:"Reserved Qty",variant:"underlined",type:"number"},null,8,["modelValue"])]),_:1}),e(u,{cols:"6"},{default:l(()=>[e(g,{modelValue:i.value.in_transit_qty,"onUpdate:modelValue":a[11]||(a[11]=r=>i.value.in_transit_qty=r),label:"In Transit Qty",placeholder:"In Transit Qty",variant:"underlined",type:"number"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(u,{cols:"12",class:"d-flex gap-4"},{default:l(()=>[e(D,{type:"submit",onClick:U},{default:l(()=>[$(" Submit ")]),_:1}),e(D,{type:"reset",color:"secondary",variant:"tonal"},{default:l(()=>[$(" Reset ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}},Ye=V("thead",null,[V("tr",null,[V("th",{class:"text-uppercase"}," Name "),V("th",{class:"text-center text-uppercase"}," Product Type "),V("th",{class:"text-center text-uppercase"}," Quantity "),V("th",{class:"text-center text-uppercase"}," Price Cost "),V("th",{class:"text-center text-uppercase"}," Cost "),V("th",{class:"text-center text-uppercase"}," Action ")])],-1),Ze={class:"text-center"},Je={class:"text-center"},We={class:"text-center"},Xe={class:"text-center"},et={class:"text-center"},tt={__name:"ProductTable",setup(t){const f=z();y(!1);const v=y(null);return(o,c)=>(B(),Y(Q,null,[e(He,null,{default:l(()=>[Ye,V("tbody",null,[(B(!0),Y(Q,null,Qe(T(f).productList,s=>(B(),Y("tr",{key:s.product_id},[V("td",null,S(s.name)+" - "+S(s.unit_amount)+S(s.unit),1),V("td",Ze,S(s.product_type),1),V("td",Je,S(s.available_qty),1),V("td",We,S(s.selling_price),1),V("td",Xe,S(s.cost),1),V("td",et,[e(Me,{size:"20",start:"",icon:"mdi-account-outline",onClick:i=>{v.value=s,T(f).editModalStatus=!0}},null,8,["onClick"])])]))),128))])]),_:1}),e(Ke,{modelValue:T(f).editModalStatus,"onUpdate:modelValue":c[0]||(c[0]=s=>T(f).editModalStatus=s),width:"auto"},{default:l(()=>[e(Oe,{product:v.value},null,8,["product"])]),_:1},8,["modelValue"])],64))}},it={__name:"ProductList",setup(t){return z(),(f,v)=>(B(),J(b,{justify:"center"},{default:l(()=>[e(u,{cols:"12"},{default:l(()=>[e(W,{title:"Basic"},{default:l(()=>[e(tt)]),_:1})]),_:1})]),_:1}))}};export{rt as _,it as a};
